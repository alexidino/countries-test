{"ast":null,"code":"import _objectSpread from\"C:/Users/PUTLER/Desktop/countriesApiProject/countries-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/PUTLER/Desktop/countriesApiProject/countries-api/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/PUTLER/Desktop/countriesApiProject/countries-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{List}from'../components/List';import{Controls}from'../components/Controls';import{Card}from'../components/Card';import{ALL_COUNTRIES}from'../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var HomePage=function HomePage(_ref){var countries=_ref.countries,setCountries=_ref.setCountries;var _useState=useState(countries),_useState2=_slicedToArray(_useState,2),filteredCountries=_useState2[0],setFilteredCountries=_useState2[1];var handleSearch=function handleSearch(search,region){var data=_toConsumableArray(countries);if(region){data=data.filter(function(item){return item.region.includes(region.value);});}if(search){data=data.filter(function(item){return item.name.toLowerCase().includes(search.toLowerCase());});}setFilteredCountries(data);};var navigate=useNavigate();useEffect(function(){axios.get(ALL_COUNTRIES).then(function(_ref2){var data=_ref2.data;return setCountries(data);});},[]);useEffect(function(){setFilteredCountries(countries);},[countries]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Controls,{handleSearch:handleSearch}),/*#__PURE__*/_jsx(List,{children:filteredCountries.sort(function(a,b){return a.name>b.name?1:-1;}).map(function(c){var countryInfo={img:c.flags.png,name:c.name,info:[{title:'Population',description:c.population.toLocaleString()},{title:'Region',description:c.region},{title:'Capital',description:c.capital}]};return/*#__PURE__*/_jsx(Card,_objectSpread({onClick:function onClick(){return navigate(\"/country/\".concat(c.name));}},countryInfo),c.name);})})]});};","map":{"version":3,"names":["axios","useState","useEffect","useNavigate","List","Controls","Card","ALL_COUNTRIES","HomePage","countries","setCountries","filteredCountries","setFilteredCountries","handleSearch","search","region","data","filter","item","includes","value","name","toLowerCase","navigate","get","then","sort","a","b","map","c","countryInfo","img","flags","png","info","title","description","population","toLocaleString","capital"],"sources":["C:/Users/PUTLER/Desktop/countriesApiProject/countries-api/src/pages/HomePage.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport { List } from '../components/List';\r\nimport { Controls } from '../components/Controls';\r\nimport { Card } from '../components/Card';\r\nimport { ALL_COUNTRIES } from '../config';\r\n\r\nexport const HomePage = ( {countries, setCountries} ) => {\r\n  const [filteredCountries, setFilteredCountries] = useState(countries); \r\n\r\n  const handleSearch = ((search, region) => {\r\n    let data = [...countries];\r\n\r\n    if(region) {\r\n      data = data.filter(item => item.region.includes(region.value))\r\n    }\r\n    if(search) {\r\n      data = data.filter(item => item.name.toLowerCase().includes(search.toLowerCase()))\r\n    }\r\n\r\n    setFilteredCountries(data);\r\n  })\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios.get(ALL_COUNTRIES).then(\r\n      ({data}) => setCountries(data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilteredCountries(countries);\r\n  }, [countries]);\r\n\r\n  return (\r\n      <>\r\n        <Controls handleSearch={handleSearch}/>\r\n        <List>\r\n          {\r\n            filteredCountries.sort((a, b) => a.name > b.name ? 1 : -1).map(c => {\r\n              const countryInfo = {\r\n                img: c.flags.png,\r\n                name: c.name,\r\n                info: [\r\n                  {\r\n                    title: 'Population',\r\n                    description: c.population.toLocaleString(),\r\n                  },\r\n                  {\r\n                    title: 'Region',\r\n                    description: c.region,\r\n                  },\r\n                  {\r\n                    title: 'Capital',\r\n                    description: c.capital,\r\n                  },\r\n                ],\r\n              };\r\n\r\n              return <Card key={c.name} onClick={() => navigate(`/country/${c.name}`)} {...countryInfo}/>\r\n            })\r\n          }\r\n        </List>\r\n      </>\r\n  )\r\n}\r\n"],"mappings":"obAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,OAASC,IAAI,KAAQ,oBAAoB,CACzC,OAASC,QAAQ,KAAQ,wBAAwB,CACjD,OAASC,IAAI,KAAQ,oBAAoB,CACzC,OAASC,aAAa,KAAQ,WAAW,CAAC,6IAE1C,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAAoC,IAA9BC,UAAS,MAATA,SAAS,CAAEC,YAAY,MAAZA,YAAY,CAChD,cAAkDT,QAAQ,CAACQ,SAAS,CAAC,wCAA9DE,iBAAiB,eAAEC,oBAAoB,eAE9C,GAAMC,aAAY,CAAI,QAAhBA,aAAY,CAAKC,MAAM,CAAEC,MAAM,CAAK,CACxC,GAAIC,KAAI,oBAAOP,SAAS,CAAC,CAEzB,GAAGM,MAAM,CAAE,CACTC,IAAI,CAAGA,IAAI,CAACC,MAAM,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACH,MAAM,CAACI,QAAQ,CAACJ,MAAM,CAACK,KAAK,CAAC,GAAC,CAChE,CACA,GAAGN,MAAM,CAAE,CACTE,IAAI,CAAGA,IAAI,CAACC,MAAM,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACG,IAAI,CAACC,WAAW,EAAE,CAACH,QAAQ,CAACL,MAAM,CAACQ,WAAW,EAAE,CAAC,GAAC,CACpF,CAEAV,oBAAoB,CAACI,IAAI,CAAC,CAC5B,CAAE,CAEF,GAAMO,SAAQ,CAAGpB,WAAW,EAAE,CAE9BD,SAAS,CAAC,UAAM,CACdF,KAAK,CAACwB,GAAG,CAACjB,aAAa,CAAC,CAACkB,IAAI,CAC3B,mBAAET,KAAI,OAAJA,IAAI,OAAMN,aAAY,CAACM,IAAI,CAAC,GAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAENd,SAAS,CAAC,UAAM,CACdU,oBAAoB,CAACH,SAAS,CAAC,CACjC,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf,mBACI,wCACE,KAAC,QAAQ,EAAC,YAAY,CAAEI,YAAa,EAAE,cACvC,KAAC,IAAI,WAEDF,iBAAiB,CAACe,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,QAAKD,EAAC,CAACN,IAAI,CAAGO,CAAC,CAACP,IAAI,CAAG,CAAC,CAAG,CAAC,CAAC,GAAC,CAACQ,GAAG,CAAC,SAAAC,CAAC,CAAI,CAClE,GAAMC,YAAW,CAAG,CAClBC,GAAG,CAAEF,CAAC,CAACG,KAAK,CAACC,GAAG,CAChBb,IAAI,CAAES,CAAC,CAACT,IAAI,CACZc,IAAI,CAAE,CACJ,CACEC,KAAK,CAAE,YAAY,CACnBC,WAAW,CAAEP,CAAC,CAACQ,UAAU,CAACC,cAAc,EAC1C,CAAC,CACD,CACEH,KAAK,CAAE,QAAQ,CACfC,WAAW,CAAEP,CAAC,CAACf,MACjB,CAAC,CACD,CACEqB,KAAK,CAAE,SAAS,CAChBC,WAAW,CAAEP,CAAC,CAACU,OACjB,CAAC,CAEL,CAAC,CAED,mBAAO,KAAC,IAAI,gBAAc,OAAO,CAAE,yBAAMjB,SAAQ,oBAAaO,CAAC,CAACT,IAAI,EAAG,EAAC,EAAKU,WAAW,EAAtED,CAAC,CAACT,IAAI,CAAmE,CAC7F,CAAC,CAAC,EAEC,GACN,CAET,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}